---
DIGIT_STRING 		# LHS
DIGIT  				# The first after LHS is always the head
DIGIT_STRING : {AlignMiddle(0), PositionEast(0)}	# The second and following ones are the non-heads # The number in the brackets are the index to the parameter
_STRINGIZE_ 	n0 n1	# Stringization scheme. Node numbers are preceded by "n". Terminal nodes have their termName printed, whereas non terminals are subject to further stringization.
_EVAL_      	DIGIT_CONCAT(n0, n1)	# Calculation scheme: DIGIT_CONCAT is a special scheme that needs to be implemented by the evaluation routine. 

---
DIGIT_STRING	
DIGIT
_STRINGIZE_ 	n0
_EVAL_ 			STRING(n0) # needs to be implemented by the evaluation routine

---
DECIMAL_NUMBER
POINT
DIGIT_STRING : {AlignBottom(0), PositionGenWest(0), HeightRelationGreater(0)} # Left digit string
DIGIT_STRING : {AlignBottom(0), PositionGenEast(0), HeightRelationGreater(0), HeightRelationEqual(1)} # Right digit string
_STRINGIZE_		n1 n0 n2
_EVAL_ 			DECIMAL_BY_PARTS(n1, n2)	

---
DECIMAL_NUMBER
DIGIT_STRING		# Degenerative case, NT head.
_STRINGIZE_		n0
_EVAL_			n0

--- 
DECIMAL_NUMBER		# Negative sign
MINUS_OP
DECIMAL_NUMBER : {AlignMiddle(0), PositionEast(0)}
_STRINGIZE_		n0 n1
_EVAL_ 			NEGATIVE(n1)

--- 
DECIMAL_NUMBER		# Superfluous plus sign
PLUS_OP
DECIMAL_NUMBER : {AlignMiddle(0), PositionEast(0)}
_STRINGIZE_		n0 n1
_EVAL_ 			n1

---
EXPONENTIATION		(ASSOC: ASSOC_RIGHT_2B: EXPONENTIATION) # Base ^ Exponent.
EXPR_LV4			# The head is the base.
EXPR_LV4 : {AlignBottomNorthPastMiddle(0), AlignTopNorthPastTop(0), PositionGenEast(0)}	# The non-head is the exponent.
_STRINGIZE_		( n0 _SPACE_ ^ _SPACE_ n1 )		# _SPACE_ is a single space
_EVAL_			EXPONENTIATION(n0, n1)

#---
#EXPONENTIATION		(ASSOC: ASSOC_RIGHT_2B: EXPONENTIATION) # Base ^ Exponent.
#EXPR_LV3			# The head is the base.
#EXPR_LV3 : {AlignBottomNorthPastMiddle(0), AlignTopNorthPastTop(0), PositionGenEast(0)}	# The non-head is the exponent.
#_STRINGIZE_		( n0 _SPACE_ ^ _SPACE_ n1 )		# _SPACE_ is a single space
#_EVAL_			EXPONENTIATION(n0, n1)
#
---
EXPR_LV1
DECIMAL_NUMBER
_STRINGIZE_		n0
_EVAL_			n0

---
EXPR_LV1				# 
EXPONENTIATION
_STRINGIZE_		n0
_EVAL_			n0

---
EXPR_LV1				# 
FRACTION_TERM
_STRINGIZE_		n0
_EVAL_			n0

#---
#EXPR_LV1			# Addition with brackets
#ADDITION
#BRACKET_L : {AlignMiddle(0), PositionWest(0)}	# Left bracket
#BRACKET_R : {AlignMiddle(0), PositionEast(0)}	# Right bracket
#_STRINGIZE_ 	( n0 )
#_EVAL_ 			n0

---
MULTIPLICATION		(ASSOC: ASSOC_LEFT_3B: MULTIPLICATION)
MULT_OP
EXPR_LV1 : {AlignMiddle(0), PositionWest(0)} # 1st number.
EXPR_LV1 : {AlignMiddle(0), PositionEast(0)} # 2nd number
_STRINGIZE_		( n1 _SPACE_ n0 _SPACE_ n2 )
_EVAL_			MULTIPLY(n1, n2)

---
EXPR_LV1
MULTIPLICATION
_STRINGIZE_		n0
_EVAL_			n0

#---
#MULTIPLICATION
#MULT_OP
#FRACTION_TERM : {AlignMiddle(0), PositionWest(0)} # 1st number.
#FRACTION_TERM : {AlignMiddle(0), PositionEast(0)} # 2nd number
#_STRINGIZE_		( n1 _SPACE_ n0 _SPACE_ n2 )
#_EVAL_			MULTIPLY(n1, n2)
#
---
EXPR_LV2
MULTIPLICATION
_STRINGIZE_		n0
_EVAL_			n0

---
ADDITION	(ASSOC: ASSOC_LEFT_3B: ADDITION_SUBTRACTION)
PLUS_OP
EXPR_LV4 : {AlignMiddle(0), PositionWest(0)} # 1st number.
EXPR_LV4 : {AlignMiddle(0), PositionEast(0)} # 2nd number
_STRINGIZE_		( n1 _SPACE_ n0 _SPACE_ n2 )
_EVAL_			ADD(n1, n2)

---
SUBTRACTION	(ASSOC: ASSOC_LEFT_3B: ADDITION_SUBTRACTION)
MINUS_OP
EXPR_LV4 : {AlignMiddle(0), PositionWest(0)} # 1st number
EXPR_LV4 : {AlignMiddle(0), PositionEast(0)} # 2nd number
_STRINGIZE_		( n1 _SPACE_ n0 _SPACE_ n2 )
_EVAL_			SUBTRACT(n1, n2)

---
EXPR_LV3
ADDITION
_STRINGIZE_		n0
_EVAL_			n0

---
EXPR_LV3
SUBTRACTION
_STRINGIZE_		n0
_EVAL_			n0

---
FRACTION
MINUS_OP
EXPR_LV4 : {AlignWidthInclusion(0), PositionSouth(0)} # Denominator.
EXPR_LV4 : {AlignWidthInclusion(0), PositionNorth(0)} # Numerator
_STRINGIZE_		( n1 _SPACE_ / _SPACE_ n2 )
_EVAL_			DIVIDE(n2, n1)

---
FRACTION_TERM
FRACTION
_STRINGIZE_		n0
_EVAL_ 			n0

---
FRACTION_TERM		# Negative of fraction
MINUS_OP
FRACTION_TERM : {AlignMiddle(0), PositionEast(0)}
_STRINGIZE_		n0 n1
_EVAL_ 			NEGATIVE(n1)

#---
#FRACTION_TERM		 # Superfluous plus sign before fraction
#PLUS_OP
#FRACTION : {AlignMiddle(0), PositionWest(0)}
#_STRINGIZE_		n0 n1
#_EVAL_ 			n1
#
---
EXPR_LV3
FRACTION_TERM
_STRINGIZE_		n0
_EVAL_ 			n0

---
EXPR_LV3
FRACTION_TERM
_STRINGIZE_		n0
_EVAL_ 			n0

---
EXPR_LV4
EXPR_LV1
_STRINGIZE_		n0
_EVAL_			n0

---
EXPR_LV4
EXPR_LV2
_STRINGIZE_		n0
_EVAL_			n0

---
EXPR_LV4
EXPR_LV3
_STRINGIZE_		n0
_EVAL_			n0

---
ROOT
EXPR_LV4
_STRINGIZE_		n0
_EVAL_			n0